# Percona Backup for MongoDB 2.11.0 ({{date.2_11_0}})

[Installation](../installation.md){.md-button}


Percona Backup for MongoDB 是一个分布式、低影响的解决方案，用于创建 MongoDB 分片集群和副本集的一致备份，并将这些备份恢复到特定时间点。

## 发布亮点

此版本提供以下功能和改进：

## 确保成功上传任何大小的备份

当备份文件太大以至于超过备份存储的对象大小限制时，PBM 现在将这些文件拆分为符合大小限制的片段并上传到存储。PBM 命名这些片段以便稍后识别和管理它们。在恢复的数据读取期间发生相反的过程：PBM 将片段合并为单个文件并继续执行命令。您可以使用 PBM 配置重新定义默认大小限制，并确保无论大小如何都能上传备份。在[文档](../features/split-merge-backup.md) 中了解更多关于如何执行此操作的信息。

## 放弃对 MongoDB 6.0 的支持

Percona Backup for MongoDB 放弃对 MongoDB 6.0 的支持。Percona Backup for MongoDB 中的现有功能仍与 MongoDB 6.0 和 Percona Server for MongoDB 6.0 兼容；但是，不再针对此版本测试进一步的增强和错误修复。

## 在 GCS 上使用 HMAC 密钥的已知限制

在 PBM 版本 2.10.0 及更高版本中，当您通过 HMAC 密钥运行备份到 GCS 时，如果备份过程中发生网络中断，不完整的备份可能会被错误地标记为成功。这导致损坏或部分上传的归档被存储并被视为有效备份，这可能在恢复操作期间失败。此问题在 [PBM-1605](https://perconadev.atlassian.net/browse/PBM-1605) 中解决。在问题解决之前，我们建议使用带有 JSON 密钥的原生 GCS 连接类型，而不是 HMAC 密钥，以确保备份完整性。

## 变更日志

## 改进

- [PBM-1490](https://perconadev.atlassian.net/browse/PBM-1490)：物理备份现在自动拆分和重新组装非常大的文件，防止在上传到有大小限制的存储时失败。
- [PBM-1597](https://perconadev.atlassian.net/browse/PBM-1597)：当您的 MongoDB 版本不兼容时，PBM 现在显示更具体的错误消息，指导您是升级 MongoDB 还是 PBM。

## 已修复的错误

- [PBM-1497](https://perconadev.atlassian.net/browse/PBM-1497)：时间点恢复 (PITR) 现在在 oplog 重放遇到错误时准确报告失败。
- [PBM-1569](https://perconadev.atlassian.net/browse/PBM-1569)：`pbm restore` 命令现在在缺少必需参数时显示清晰的消息，而不是令人困惑的解析错误。
- [PBM-1574](https://perconadev.atlassian.net/browse/PBM-1574)：`pbm restore -w` 命令现在正确等待直到整个恢复过程完成。
- [PBM-1581](https://perconadev.atlassian.net/browse/PBM-1581)：增强了与 Google 连接的服务的安全性。
- [PBM-1583](https://perconadev.atlassian.net/browse/PBM-1583)：PBM 现在在逻辑恢复期间保留目标集群中的所有路由集合，并清除除 `config.system.sessions` 集合之外的所有集合的内容，以避免 "Time monotonicity violation" 错误
- [PBM-1591](https://perconadev.atlassian.net/browse/PBM-1591)：即使时间序列集合在不同数据库中共享相同名称，逻辑备份现在也能成功完成。
- [PBM-1604](https://perconadev.atlassian.net/browse/PBM-1604)：PBM CLI 现在在单节点副本集设置中正确等待恢复完成，而不会报告错误。




